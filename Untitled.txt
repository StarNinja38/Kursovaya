using System;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;
using PasswordLogic;  // –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É

namespace PasswordChecker
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            
            // –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            this.Text = "üîê Password Security Analyzer Pro";
            if (adviceLabel != null)
                adviceLabel.Text = "üîí –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞";
            if (securityIcon != null)
                securityIcon.BackColor = Color.LightGray;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
        private void passwordBox_TextChanged(object sender, EventArgs e)
        {
            string password = passwordBox.Text;
            int strength = PasswordHelper.GetStrength(password);
            string level = PasswordHelper.GetLevel(strength);
            string advice = PasswordHelper.GetAdvice(password);
            
            UpdateInterface(strength, level, advice);
        }

        // –ú–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        private void UpdateInterface(int strength, string level, string advice)
        {
            if (strengthBar != null) strengthBar.Value = strength;
            if (resultLabel != null) resultLabel.Text = $"–£–†–û–í–ï–ù–¨: {level} ({strength}%)";
            if (adviceLabel != null) adviceLabel.Text = advice;
            
            // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            if (securityIcon != null)
            {
                if (strength < 30) securityIcon.BackColor = Color.Red;
                else if (strength < 80) securityIcon.BackColor = Color.Orange;  
                else securityIcon.BackColor = Color.Green;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å
        private void showPassword_CheckedChanged(object sender, EventArgs e)
        {
            if (passwordBox != null)
                passwordBox.UseSystemPasswordChar = !showPassword.Checked;
        }

        // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π
        private void clearBtn_Click(object sender, EventArgs e)
        {
            if (passwordBox != null) passwordBox.Clear();
            if (strengthBar != null) strengthBar.Value = 0;
            if (resultLabel != null) resultLabel.Text = "–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞";
            if (adviceLabel != null) adviceLabel.Text = "üîí –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞";
            if (securityIcon != null) securityIcon.BackColor = Color.Gray;
        }
    }
}